datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["prismaSchemaFolder"]
}

model Exclude_Year {
  exyear Int @id
}

model Reflibrarytype {
  id          Int       @id @default(autoincrement())
  librarytype String
  library     Library[]
}

model Reflibraryregion {
  id            Int       @id @default(autoincrement())
  libraryregion String
  library       Library[]
}

model Language {
  id    Int    @id @default(autoincrement())
  short String
  full  String
}

model Library_Year {
  id                  Int      @id @default(autoincrement())
  library             Int
  is_open_for_editing Boolean? @default(false)
  admin_notes         String?
  year                Int
  updated_at          DateTime
  is_active           Boolean? @default(true)

  electronicId             Int?
  electronic_BooksId       Int?
  entry_StatusId           Int?
  fiscal_SupportId         Int?
  serialsId                Int?
  volume_HoldingsId        Int?
  Electronic_Books         Electronic_Books?          @relation(fields: [electronic_BooksId], references: [id])
  Entry_Status             Entry_Status?              @relation(fields: [entry_StatusId], references: [id])
  Fiscal_Support           Fiscal_Support?            @relation(fields: [fiscal_SupportId], references: [id])
  Library                  Library                    @relation(fields: [library], references: [id])
  LibraryYear_ListAV       LibraryYear_ListAV[]
  LibraryYear_ListEBook    LibraryYear_ListEBook[]
  LibraryYear_ListEJournal LibraryYear_ListEJournal[]
  Other_Holdings           Other_Holdings?
  Monographic_Acquisitions Monographic_Acquisitions?
  Personnel_Support        Personnel_Support?
  Electronic               Electronic?                @relation(fields: [electronicId], references: [id])
  Serials                  Serials?                   @relation(fields: [serialsId], references: [id])
  Volume_Holdings          Volume_Holdings?           @relation(fields: [volume_HoldingsId], references: [id])
}

model User {
  id           Int            @id @default(autoincrement())
  username     String         @unique
  password     String
  isactive     Boolean        @default(true)
  lastlogin_at DateTime?
  firstname    String?
  lastname     String?
  User_Library User_Library[]
  User_Roles   Users_Roles[]
}

model User_Library {
  user_id    Int
  library_id Int
  User       User    @relation(fields: [user_id], references: [id])
  Library    Library @relation(fields: [library_id], references: [id])

  @@unique([user_id, library_id])
}

model Role {
  id         Int           @id @default(autoincrement())
  role       String
  name       String
  User_Roles Users_Roles[]
}

model Users_Roles {
  user_id Int
  role_id Int
  User    User @relation(fields: [user_id], references: [id])
  Role    Role @relation(fields: [role_id], references: [id])

  @@unique([user_id, role_id])
}
